# note 投稿ルール

## フォーマット対応状況

| 要素 | 対応 | 備考 |
|------|------|------|
| 見出し | H2, H3のみ | H1は記事タイトル、H4以下は非対応 |
| 太字 | 対応 | `**text**` / ツールバーから |
| 斜体 | 非対応 | 太字で代替 |
| 取り消し線 | 対応 | `~~text~~` |
| テーブル | 非対応 | 箇条書き・KaTeX配列・画像で代替 |
| コードブロック | 対応 | シンタックスハイライト可（多数言語） |
| インラインコード | 対応 | バッククォート |
| Mermaid | 対応 | コードブロック内で `mermaid` 指定 |
| 数式（KaTeX） | 対応 | インライン: `$${数式}$$`、ブロック: 段落先頭末尾に `$$` |
| 引用 | 対応 | `>` 記法 |
| リスト | 対応 | 箇条書き・番号付き（ネストは限定的） |
| 区切り線 | 対応 | `---` |
| リンク | テキストリンク対応 | Markdown `[text](url)` 記法は非対応、ツールバーから設定 |
| 画像 | 対応 | JPG/PNG、20MB上限 |
| 埋め込み | 多数対応 | YouTube, X, GitHub Gist, Figma, Spotify 等（URL貼付で自動変換） |
| 目次 | 手動挿入 | エディタの `+` ボタンから挿入 |
| 脚注 | 非対応 | 本文中に括弧書きで代替 |
| 折りたたみ | 非対応 | セクション分割で代替 |
| 注釈ブロック | 非対応 | 引用ブロック（`>`）で代替 |

## 変換時の注意

- **見出し**: master.md の H4 以下は太字テキストに変換する
- **テーブル**: 箇条書きに変換する（比較表はKaTeX配列 or 画像化を検討）
- **斜体**: 太字に置き換える
- **リンク**: `[text](url)` 形式ではなく、URLを直接貼り付けてカード表示にする
- **脚注**: 本文中に「（※...）」形式で記載する
- **Mermaid**: そのまま使用可（以前は非対応だったが現在は対応済み）

## 構成

- 冒頭にリード文（この記事で得られること）
- 本文はストーリー性を意識
- 末尾にまとめとCTA
- 目次は記事冒頭に手動で挿入する

## トーン

- カジュアルで読みやすいエッセイ調
- 体験談・失敗談を交えたストーリー構成
- 導入で共感を呼ぶ問いかけ

## 推奨

- 文字数: 2,000〜4,000字が読了率が高い（最大15,000字程度）
- 画像: WordPressにアップロード済みのURLを参照

## 投稿手段

- **API投稿**（`scripts/post-note.py`）で投稿
- note.comの非公式APIを利用（Cookie認証）
- Markdown → HTML変換はPython（markdown-it-py）で実行
- note-cli（https://github.com/JY8752/note-cli）はローカルでの記事管理・OGP画像生成に使用
- Cookieの有効期限が切れた場合はブラウザから再取得が必要

## API投稿の手順

1. `platforms/note.md` を読み込み
2. Markdown → HTML に変換
3. note.com API でタイトル + HTML本文を送信（下書き保存）
4. 保存後のIDとURLを取得して返す

## Cookie設定

1. ブラウザで note.com にログイン
2. DevTools > Application > Cookies > note.com
3. `_note_session_v5` の値をコピー
4. `.env` に追加: `NOTE_COOKIES="_note_session_v5=<値>"`
